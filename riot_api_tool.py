import requests\nimport json\nimport time\nimport os\nimport threading\nfrom datetime import datetime\nfrom typing import Dict, List, Optional, Tuple\n\ntry:\n    from config import RIOT_API_KEY, MONITOR_INTERVAL, DATA_DIR\nexcept ImportError:\n    print(\"âš ï¸  config.pyãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚config.py.exampleã‚’config.pyã«ã‚³ãƒ”ãƒ¼ã—ã¦API Keyã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚\")\n    RIOT_API_KEY = \"\"\n    MONITOR_INTERVAL = 10\n    DATA_DIR = \"spectator_data\"\n\nclass RiotAPISpectatorTool:\n    def __init__(self, api_key: str = None):\n        \"\"\"\n        Riot API ã‚­ãƒ¼ã‚’ä½¿ã£ã¦ãƒ„ãƒ¼ãƒ«ã‚’åˆæœŸåŒ–\n        \"\"\"\n        self.api_key = api_key or RIOT_API_KEY\n        if not self.api_key:\n            raise ValueError(\"API KeyãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚config.pyã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚\")\n            \n        self.headers = {\"X-Riot-Token\": self.api_key}\n        \n        # ãƒªãƒ¼ã‚¸ãƒ§ãƒŠãƒ«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°\n        self.regional_urls = {\n            \"kr\": \"https://kr.api.riotgames.com\",\n            \"euw1\": \"https://euw1.api.riotgames.com\", \n            \"eun1\": \"https://eun1.api.riotgames.com\",\n            \"na1\": \"https://na1.api.riotgames.com\",\n            \"br1\": \"https://br1.api.riotgames.com\",\n            \"jp1\": \"https://jp1.api.riotgames.com\",\n            \"la1\": \"https://la1.api.riotgames.com\",\n            \"la2\": \"https://la2.api.riotgames.com\",\n            \"oc1\": \"https://oc1.api.riotgames.com\",\n            \"tr1\": \"https://tr1.api.riotgames.com\",\n            \"ru\": \"https://ru.api.riotgames.com\"\n        }\n        \n        # ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ãƒãƒƒãƒ”ãƒ³ã‚°\n        self.cluster_urls = {\n            \"americas\": \"https://americas.api.riotgames.com\",\n            \"asia\": \"https://asia.api.riotgames.com\", \n            \"europe\": \"https://europe.api.riotgames.com\",\n            \"esports\": \"https://esports.api.riotgames.com\"\n        }\n        \n        # ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã¨ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã®ãƒãƒƒãƒ”ãƒ³ã‚°\n        self.region_to_cluster = {\n            \"kr\": \"asia\",\n            \"jp1\": \"asia\",\n            \"euw1\": \"europe\",\n            \"eun1\": \"europe\", \n            \"tr1\": \"europe\",\n            \"ru\": \"europe\",\n            \"na1\": \"americas\",\n            \"br1\": \"americas\",\n            \"la1\": \"americas\",\n            \"la2\": \"americas\",\n            \"oc1\": \"americas\"\n        }\n        \n        # ç›£è¦–çŠ¶æ…‹ç®¡ç†\n        self.monitoring = False\n        self.monitored_players = []\n        self.current_games = {}  # puuid -> game_data\n        \n        # æœ‰åãƒ—ãƒ­ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ã‚µãƒ³ãƒ—ãƒ«ï¼ˆRiotIDå½¢å¼ï¼‰\n        self.pro_players = {\n            \"kr\": [\n                {\"game_name\": \"Hide on bush\", \"tag_line\": \"KR1\"},  # Faker\n                {\"game_name\": \"T1 Zeus\", \"tag_line\": \"KR1\"},\n                {\"game_name\": \"T1 Oner\", \"tag_line\": \"KR1\"},\n                {\"game_name\": \"T1 Gumayusi\", \"tag_line\": \"KR1\"},\n                {\"game_name\": \"T1 Keria\", \"tag_line\": \"KR1\"},\n                {\"game_name\": \"GenG Chovy\", \"tag_line\": \"KR1\"},\n                {\"game_name\": \"GenG Canyon\", \"tag_line\": \"KR1\"}\n            ],\n            \"euw1\": [\n                {\"game_name\": \"Caps\", \"tag_line\": \"G2\"},\n                {\"game_name\": \"Jankos\", \"tag_line\": \"EUW\"},\n                {\"game_name\": \"Rekkles\", \"tag_line\": \"EUW\"},\n                {\"game_name\": \"Mikyx\", \"tag_line\": \"G2\"},\n                {\"game_name\": \"Wunder\", \"tag_line\": \"EUW\"}\n            ]\n        }\n    \n    def get_account_by_riot_id(self, game_name: str, tag_line: str, cluster: str = \"asia\") -> Optional[Dict]:\n        \"\"\"\n        RiotID (ã‚²ãƒ¼ãƒ å + ã‚¿ã‚°) ã‹ã‚‰ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±ã¨PUUIDã‚’å–å¾—\n        \"\"\"\n        url = f\"{self.cluster_urls[cluster]}/riot/account/v1/accounts/by-riot-id/{game_name}/{tag_line}\"\n        \n        try:\n            response = requests.get(url, headers=self.headers)\n            if response.status_code == 200:\n                return response.json()\n            else:\n                print(f\"ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå–å¾—ã‚¨ãƒ©ãƒ¼: {response.status_code} - {game_name}#{tag_line}\")\n                return None\n        except Exception as e:\n            print(f\"APIå‘¼ã³å‡ºã—ã‚¨ãƒ©ãƒ¼: {e}\")\n            return None\n    \n    def get_summoner_by_puuid(self, puuid: str, region: str) -> Optional[Dict]:\n        \"\"\"\n        PUUIDã‹ã‚‰ã‚µãƒãƒŠãƒ¼æƒ…å ±ã‚’å–å¾—\n        \"\"\"\n        url = f\"{self.regional_urls[region]}/lol/summoner/v4/summoners/by-puuid/{puuid}\"\n        \n        try:\n            response = requests.get(url, headers=self.headers)\n            if response.status_code == 200:\n                return response.json()\n            else:\n                print(f\"ã‚µãƒãƒŠãƒ¼å–å¾—ã‚¨ãƒ©ãƒ¼: {response.status_code}\")\n                return None\n        except Exception as e:\n            print(f\"APIå‘¼ã³å‡ºã—ã‚¨ãƒ©ãƒ¼: {e}\")\n            return None\n    \n    def get_current_game(self, puuid: str, region: str) -> Optional[Dict]:\n        \"\"\"\n        ç¾åœ¨é€²è¡Œä¸­ã®ã‚²ãƒ¼ãƒ æƒ…å ±ã‚’å–å¾—\n        \"\"\"\n        # ã¾ãšã‚µãƒãƒŠãƒ¼æƒ…å ±ã‚’å–å¾—\n        summoner = self.get_summoner_by_puuid(puuid, region)\n        if not summoner:\n            return None\n        \n        url = f\"{self.regional_urls[region]}/lol/spectator/v4/active-games/by-summoner/{summoner['id']}\"\n        \n        try:\n            response = requests.get(url, headers=self.headers)\n            if response.status_code == 200:\n                game_data = response.json()\n                # ã‚½ãƒ­ãƒ©ãƒ³ã‚¯ã‹ãƒã‚§ãƒƒã‚¯ (queueId: 420 = Ranked Solo)\n                if game_data.get(\"gameQueueConfigId\") == 420:\n                    return game_data\n                else:\n                    return None\n            elif response.status_code == 404:\n                return None  # ã‚²ãƒ¼ãƒ ä¸­ã§ã¯ãªã„\n            else:\n                print(f\"è¦³æˆ¦ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼: {response.status_code}\")\n                return None\n        except Exception as e:\n            print(f\"APIå‘¼ã³å‡ºã—ã‚¨ãƒ©ãƒ¼: {e}\")\n            return None\n    \n    def get_match_details(self, match_id: str, cluster: str) -> Optional[Dict]:\n        \"\"\"\n        ç‰¹å®šã®è©¦åˆã®è©³ç´°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—\n        \"\"\"\n        url = f\"{self.cluster_urls[cluster]}/lol/match/v5/matches/{match_id}\"\n        \n        try:\n            response = requests.get(url, headers=self.headers)\n            if response.status_code == 200:\n                return response.json()\n            else:\n                print(f\"è©¦åˆè©³ç´°å–å¾—ã‚¨ãƒ©ãƒ¼: {response.status_code} - {match_id}\")\n                return None\n        except Exception as e:\n            print(f\"APIå‘¼ã³å‡ºã—ã‚¨ãƒ©ãƒ¼: {e}\")\n            return None\n    \n    def add_player_to_monitor(self, game_name: str, tag_line: str, region: str, cluster: str = None):\n        \"\"\"\n        ç›£è¦–å¯¾è±¡ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’è¿½åŠ \n        \"\"\"\n        if cluster is None:\n            cluster = self.region_to_cluster.get(region, \"asia\")\n            \n        account = self.get_account_by_riot_id(game_name, tag_line, cluster)\n        if account:\n            player_data = {\n                \"game_name\": game_name,\n                \"tag_line\": tag_line,\n                \"puuid\": account[\"puuid\"],\n                \"region\": region,\n                \"cluster\": cluster\n            }\n            \n            # é‡è¤‡ãƒã‚§ãƒƒã‚¯\n            for existing in self.monitored_players:\n                if existing[\"puuid\"] == account[\"puuid\"]:\n                    print(f\"ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ {game_name}#{tag_line} ã¯æ—¢ã«ç›£è¦–å¯¾è±¡ã§ã™\")\n                    return False\n            \n            self.monitored_players.append(player_data)\n            print(f\"âœ“ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ {game_name}#{tag_line} ã‚’ç›£è¦–å¯¾è±¡ã«è¿½åŠ ã—ã¾ã—ãŸ\")\n            return True\n        else:\n            print(f\"ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ {game_name}#{tag_line} ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“\")\n            return False\n    \n    def remove_player_from_monitor(self, game_name: str, tag_line: str):\n        \"\"\"\n        ç›£è¦–å¯¾è±¡ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’å‰Šé™¤\n        \"\"\"\n        for i, player in enumerate(self.monitored_players):\n            if player[\"game_name\"] == game_name and player[\"tag_line\"] == tag_line:\n                removed = self.monitored_players.pop(i)\n                # ç¾åœ¨ã®ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚‚å‰Šé™¤\n                if removed[\"puuid\"] in self.current_games:\n                    del self.current_games[removed[\"puuid\"]]\n                print(f\"âœ“ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ {game_name}#{tag_line} ã‚’ç›£è¦–å¯¾è±¡ã‹ã‚‰å‰Šé™¤ã—ã¾ã—ãŸ\")\n                return True\n        \n        print(f\"ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ {game_name}#{tag_line} ã¯ç›£è¦–å¯¾è±¡ã«ã‚ã‚Šã¾ã›ã‚“\")\n        return False\n    \n    def start_monitoring(self):\n        \"\"\"\n        ã‚½ãƒ­ãƒ©ãƒ³ã‚¯ç›£è¦–ã‚’é–‹å§‹\n        \"\"\"\n        if self.monitoring:\n            print(\"æ—¢ã«ç›£è¦–ä¸­ã§ã™\")\n            return\n        \n        if not self.monitored_players:\n            print(\"ç›£è¦–å¯¾è±¡ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“\")\n            return\n        \n        self.monitoring = True\n        print(f\"âœ“ {len(self.monitored_players)} äººã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ç›£è¦–ã‚’é–‹å§‹ã—ã¾ã—ãŸ\")\n        print(\"=== ç›£è¦–ãƒ­ã‚° ===\")\n        \n        # ç›£è¦–ãƒ«ãƒ¼ãƒ—ã‚’åˆ¥ã‚¹ãƒ¬ãƒƒãƒ‰ã§å®Ÿè¡Œ\n        monitor_thread = threading.Thread(target=self._monitor_loop)\n        monitor_thread.daemon = True\n        monitor_thread.start()\n    \n    def stop_monitoring(self):\n        \"\"\"\n        ç›£è¦–ã‚’åœæ­¢\n        \"\"\"\n        self.monitoring = False\n        print(\"âœ“ ç›£è¦–ã‚’åœæ­¢ã—ã¾ã—ãŸ\")\n    \n    def _monitor_loop(self):\n        \"\"\"\n        ç›£è¦–ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ—\n        \"\"\"\n        while self.monitoring:\n            for player in self.monitored_players:\n                if not self.monitoring:\n                    break\n                \n                puuid = player[\"puuid\"]\n                game_name = player[\"game_name\"]\n                tag_line = player[\"tag_line\"]\n                region = player[\"region\"]\n                cluster = player[\"cluster\"]\n                \n                try:\n                    current_game = self.get_current_game(puuid, region)\n                    \n                    if current_game and puuid not in self.current_games:\n                        # æ–°ã—ã„ã‚½ãƒ­ãƒ©ãƒ³ã‚¯ã‚²ãƒ¼ãƒ ãŒé–‹å§‹ã•ã‚ŒãŸ\n                        self.current_games[puuid] = current_game\n                        timestamp = datetime.now().strftime(\"%H:%M:%S\")\n                        print(f\"[{timestamp}] ğŸ® {game_name}#{tag_line} ãŒã‚½ãƒ­ãƒ©ãƒ³ã‚¯ã‚’é–‹å§‹ã—ã¾ã—ãŸï¼\")\n                        \n                        # è¦³æˆ¦ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰\n                        self._download_live_game_data(player, current_game)\n                    \n                    elif not current_game and puuid in self.current_games:\n                        # ã‚²ãƒ¼ãƒ ãŒçµ‚äº†ã—ãŸ\n                        del self.current_games[puuid]\n                        timestamp = datetime.now().strftime(\"%H:%M:%S\")\n                        print(f\"[{timestamp}] ğŸ {game_name}#{tag_line} ã®ã‚²ãƒ¼ãƒ ãŒçµ‚äº†ã—ã¾ã—ãŸ\")\n                    \n                except Exception as e:\n                    print(f\"ç›£è¦–ã‚¨ãƒ©ãƒ¼ ({game_name}#{tag_line}): {e}\")\n                \n                # 10ç§’å¾…æ©Ÿ\n                time.sleep(MONITOR_INTERVAL)\n            \n            # å…¨ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒã‚§ãƒƒã‚¯å¾Œã«å°‘ã—å¾…æ©Ÿ\n            if self.monitoring:\n                time.sleep(1)\n    \n    def _download_live_game_data(self, player: Dict, game_data: Dict):\n        \"\"\"\n        ãƒ©ã‚¤ãƒ–ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰\n        \"\"\"\n        try:\n            timestamp = datetime.now().strftime(\"%Y%m%d_%H%M%S\")\n            game_name = player[\"game_name\"]\n            tag_line = player[\"tag_line\"]\n            region = player[\"region\"]\n            \n            # ãƒ‡ãƒ¼ã‚¿ä¿å­˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ\n            data_dir = os.path.join(DATA_DIR, region, f\"{game_name}_{tag_line}\")\n            os.makedirs(data_dir, exist_ok=True)\n            \n            # ãƒ©ã‚¤ãƒ–ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜\n            filename = os.path.join(data_dir, f\"live_game_{timestamp}.json\")\n            \n            # ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æƒ…å ±ã‚’è¿½åŠ \n            enhanced_data = {\n                \"target_player\": {\n                    \"game_name\": game_name,\n                    \"tag_line\": tag_line,\n                    \"puuid\": player[\"puuid\"],\n                    \"region\": region\n                },\n                \"download_time\": datetime.now().isoformat(),\n                \"game_data\": game_data\n            }\n            \n            with open(filename, 'w', encoding='utf-8') as f:\n                json.dump(enhanced_data, f, ensure_ascii=False, indent=2)\n            \n            print(f\"  â†’ è¦³æˆ¦ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜: {filename}\")\n            \n            # å‚åŠ è€…ãƒªã‚¹ãƒˆã‚’è¡¨ç¤º\n            participants = game_data.get(\"participants\", [])\n            print(f\"  â†’ å‚åŠ è€…: {len(participants)} äºº\")\n            for i, p in enumerate(participants[:5]):  # æœ€åˆã®5äººã ã‘è¡¨ç¤º\n                champion_id = p.get('championId', 'Unknown')\n                summoner_name = p.get('summonerName', 'Unknown')\n                print(f\"    {i+1}. {summoner_name} (Champion: {champion_id})\")\n            \n        except Exception as e:\n            print(f\"è¦³æˆ¦ãƒ‡ãƒ¼ã‚¿ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼: {e}\")\n    \n    def list_monitored_players(self):\n        \"\"\"\n        ç¾åœ¨ã®ç›£è¦–å¯¾è±¡ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒªã‚¹ãƒˆã‚’è¡¨ç¤º\n        \"\"\"\n        if not self.monitored_players:\n            print(\"ç›£è¦–å¯¾è±¡ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯ã„ã¾ã›ã‚“\")\n            return\n        \n        print(f\"\\n=== ç›£è¦–å¯¾è±¡ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ ({len(self.monitored_players)} äºº) ===\")\n        for i, player in enumerate(self.monitored_players, 1):\n            status = \"ğŸ® ã‚²ãƒ¼ãƒ ä¸­\" if player[\"puuid\"] in self.current_games else \"â­• å¾…æ©Ÿä¸­\"\n            print(f\"{i}. {player['game_name']}#{player['tag_line']} ({player['region']}) - {status}\")\n    \n    def add_pro_players_by_region(self, region: str):\n        \"\"\"\n        ç‰¹å®šåœ°åŸŸã®ãƒ—ãƒ­ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’ä¸€æ‹¬è¿½åŠ \n        \"\"\"\n        if region not in self.pro_players:\n            print(f\"åœ°åŸŸ {region} ã®ãƒ—ãƒ­ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“\")\n            return\n        \n        cluster = self.region_to_cluster.get(region, \"asia\")\n        added = 0\n        \n        for pro in self.pro_players[region]:\n            if self.add_player_to_monitor(pro[\"game_name\"], pro[\"tag_line\"], region, cluster):\n                added += 1\n                time.sleep(1)  # APIåˆ¶é™å¯¾ç­–\n        \n        print(f\"âœ“ {region} ã‹ã‚‰ {added} äººã®ãƒ—ãƒ­ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’è¿½åŠ ã—ã¾ã—ãŸ\")\n\ndef main():\n    \"\"\"\n    ãƒ¡ã‚¤ãƒ³å®Ÿè¡Œé–¢æ•°\n    \"\"\"\n    print(\"=== Riot API ã‚½ãƒ­ãƒ©ãƒ³ã‚¯ç›£è¦–&è¦³æˆ¦ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ„ãƒ¼ãƒ« ===\")\n    print(f\"API Keyè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«: config.py\")\n    print(f\"ãƒ‡ãƒ¼ã‚¿ä¿å­˜å…ˆ: {DATA_DIR}\")\n    print(f\"ç›£è¦–é–“éš”: {MONITOR_INTERVAL}ç§’\\n\")\n    \n    try:\n        tool = RiotAPISpectatorTool()\n    except ValueError as e:\n        print(f\"ã‚¨ãƒ©ãƒ¼: {e}\")\n        print(\"\\n1. config.py.example ã‚’ config.py ã«ã‚³ãƒ”ãƒ¼\")\n        print(\"2. RIOT_API_KEY ã« Personal API Key ã‚’è¨­å®š\")\n        print(\"3. Riot Developer Portal: https://developer.riotgames.com/\")\n        return\n    \n    while True:\n        print(\"\\n=== ãƒ¡ãƒ‹ãƒ¥ãƒ¼ ===\")\n        print(\"1. ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’ç›£è¦–å¯¾è±¡ã«è¿½åŠ \")\n        print(\"2. ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’ç›£è¦–å¯¾è±¡ã‹ã‚‰å‰Šé™¤\") \n        print(\"3. ç›£è¦–å¯¾è±¡ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ä¸€è¦§è¡¨ç¤º\")\n        print(\"4. ãƒ—ãƒ­ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’åœ°åŸŸåˆ¥ä¸€æ‹¬è¿½åŠ \")\n        print(\"5. ã‚½ãƒ­ãƒ©ãƒ³ã‚¯ç›£è¦–é–‹å§‹\")\n        print(\"6. ç›£è¦–åœæ­¢\")\n        print(\"7. åˆ©ç”¨å¯èƒ½åœ°åŸŸä¸€è¦§è¡¨ç¤º\")\n        print(\"0. çµ‚äº†\")\n        \n        choice = input(\"\\né¸æŠã—ã¦ãã ã•ã„ (0-7): \").strip()\n        \n        if choice == \"0\":\n            tool.stop_monitoring()\n            print(\"ãƒ„ãƒ¼ãƒ«ã‚’çµ‚äº†ã—ã¾ã™\")\n            break\n        \n        elif choice == \"1\":\n            game_name = input(\"ã‚²ãƒ¼ãƒ åã‚’å…¥åŠ›: \").strip()\n            tag_line = input(\"ã‚¿ã‚°ãƒ©ã‚¤ãƒ³ã‚’å…¥åŠ›: \").strip()\n            \n            print(\"\\nåˆ©ç”¨å¯èƒ½åœ°åŸŸ:\")\n            regions = list(tool.regional_urls.keys())\n            for i, region in enumerate(regions):\n                print(f\"{i+1}. {region}\")\n            \n            try:\n                region_idx = int(input(f\"åœ°åŸŸã‚’é¸æŠ (1-{len(regions)}): \")) - 1\n                region = regions[region_idx]\n                cluster = tool.region_to_cluster.get(region, \"asia\")\n                \n                tool.add_player_to_monitor(game_name, tag_line, region, cluster)\n            except (ValueError, IndexError):\n                print(\"ç„¡åŠ¹ãªé¸æŠã§ã™\")\n        \n        elif choice == \"2\":\n            game_name = input(\"å‰Šé™¤ã™ã‚‹ã‚²ãƒ¼ãƒ åã‚’å…¥åŠ›: \").strip()\n            tag_line = input(\"å‰Šé™¤ã™ã‚‹ã‚¿ã‚°ãƒ©ã‚¤ãƒ³ã‚’å…¥åŠ›: \").strip()\n            tool.remove_player_from_monitor(game_name, tag_line)\n        \n        elif choice == \"3\":\n            tool.list_monitored_players()\n        \n        elif choice == \"4\":\n            print(\"\\nåˆ©ç”¨å¯èƒ½åœ°åŸŸ:\")\n            available_regions = list(tool.pro_players.keys())\n            for i, region in enumerate(available_regions):\n                print(f\"{i+1}. {region}\")\n            \n            try:\n                region_idx = int(input(f\"åœ°åŸŸã‚’é¸æŠ (1-{len(available_regions)}): \")) - 1\n                region = available_regions[region_idx]\n                tool.add_pro_players_by_region(region)\n            except (ValueError, IndexError):\n                print(\"ç„¡åŠ¹ãªé¸æŠã§ã™\")\n        \n        elif choice == \"5\":\n            tool.start_monitoring()\n        \n        elif choice == \"6\":\n            tool.stop_monitoring()\n        \n        elif choice == \"7\":\n            print(\"\\n=== åˆ©ç”¨å¯èƒ½åœ°åŸŸ ===\")\n            for region, url in tool.regional_urls.items():\n                cluster = tool.region_to_cluster.get(region, \"ä¸æ˜\")\n                print(f\"{region}: {cluster} ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼\")\n\nif __name__ == \"__main__\":\n    main()